<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>여러개 마커에 이벤트 등록하기1</title>
    
</head>
<body>
<div id="map" style="width:100%;height:350px;"></div>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=발급받은 APP KEY를 사용하세요"></script>
<script>
var mapContainer = document.getElementById('map'), // 지도를 표시할 div  
    mapOption = { 
        center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };

var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
 
// 마커를 표시할 위치와 내용을 가지고 있는 객체 배열입니다 
var positions = [
    {
content: '<div>망원역 1번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.5556488,126.9106293)
},
{
content: '<div>망원역 2번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.55495071,126.9108353)
},
{
content: '<div>합정역 1번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.55062866,126.9149857)
},
{
content: '<div>합정역 5번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.55000687,126.9148254)
},
{
content: '<div>합정역 7번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.54864502,126.9128265)
},
{
content: '<div>신한은행 서교동금융센터점 앞</div>',
latlng: new kakao.maps.LatLng(37.55751038,126.9185028)
},
{
content: '<div>서교동 사거리</div>',
latlng: new kakao.maps.LatLng(37.55274582,126.9186173)
},
{
content: '<div>제일빌딩 앞</div>',
latlng: new kakao.maps.LatLng(37.54769135,126.9199829)
},
{
content: '<div>상수역 2번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.54787064,126.9235306)
},
{
content: '<div>극동방송국 앞</div>',
latlng: new kakao.maps.LatLng(37.54920197,126.9232025)
},
{
content: '<div>홍대입구역 2번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.55749893,126.9238052)
},
{
content: '<div>홍대입구역 8번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.55706024,126.9244232)
},
{
content: '<div>마스타 빌딩 앞</div>',
latlng: new kakao.maps.LatLng(37.55893326,126.9271164)
},
{
content: '<div>일진아이윌아파트 옆</div>',
latlng: new kakao.maps.LatLng(37.56454086,126.9270706)
},
{
content: '<div>홍은사거리</div>',
latlng: new kakao.maps.LatLng(37.59115982,126.94133)
},
{
content: '<div>광흥창역 2번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.54773331,126.9317627)
},
{
content: '<div>서강나루 공원</div>',
latlng: new kakao.maps.LatLng(37.54528427,126.9310532)
},
{
content: '<div>신수동 사거리</div>',
latlng: new kakao.maps.LatLng(37.54524231,126.9341126)
},
{
content: '<div>마포소방서 앞</div>',
latlng: new kakao.maps.LatLng(37.54976654,126.9331741)
},
{
content: '<div>신성기사식당 앞</div>',
latlng: new kakao.maps.LatLng(37.54745865,126.9383774)
},
{
content: '<div>문화촌 공원</div>',
latlng: new kakao.maps.LatLng(37.59432983,126.9473877)
},
{
content: '<div>서강대 정문 건너편</div>',
latlng: new kakao.maps.LatLng(37.55113983,126.9369888)
},
{
content: '<div>서강대 남문 옆</div>',
latlng: new kakao.maps.LatLng(37.54948425,126.9389496)
},
{
content: '<div>서강대 후문 옆</div>',
latlng: new kakao.maps.LatLng(37.55041122,126.9438477)
},
{
content: '<div>현대벤처빌 앞</div>',
latlng: new kakao.maps.LatLng(37.5535202,126.9369507)
},
{
content: '<div>신촌역(2호선) 1번출구 옆</div>',
latlng: new kakao.maps.LatLng(37.55549622,126.9363403)
},
{
content: '<div>신촌역(2호선) 6번출구 옆</div>',
latlng: new kakao.maps.LatLng(37.55505371,126.9375687)
},
{
content: '<div>신촌역(2호선) 7번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.55485916,126.9361572)
},
{
content: '<div>증산2교</div>',
latlng: new kakao.maps.LatLng(37.5841713,126.9111023)
},
{
content: '<div>해담는다리</div>',
latlng: new kakao.maps.LatLng(37.58203125,126.9089966)
},
{
content: '<div>연세로 명물길</div>',
latlng: new kakao.maps.LatLng(37.55789185,126.9380798)
},
{
content: '<div>명물길 원형무대 앞</div>',
latlng: new kakao.maps.LatLng(37.5591011,126.9391785)
},
{
content: '<div>NH농협 신촌지점 앞</div>',
latlng: new kakao.maps.LatLng(37.55681229,126.9431839)
},
{
content: '<div>신촌동 제1공영주차장 앞</div>',
latlng: new kakao.maps.LatLng(37.5591774,126.9345245)
},
{
content: '<div>연세대 정문 건너편</div>',
latlng: new kakao.maps.LatLng(37.55979538,126.9344788)
},
{
content: '<div>이화여대 후문</div>',
latlng: new kakao.maps.LatLng(37.560009,126.9407349)
},
{
content: '<div>연대 대운동장 옆</div>',
latlng: new kakao.maps.LatLng(37.56238174,126.9326477)
},
{
content: '<div>아현역 4번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.55720139,126.9556656)
},
{
content: '<div>공덕역 2번출구</div>',
latlng: new kakao.maps.LatLng(37.54457855,126.9502182)
},
{
content: '<div>공덕역 8번출구</div>',
latlng: new kakao.maps.LatLng(37.5435791,126.9513245)
},
{
content: '<div>공덕역 5번출구</div>',
latlng: new kakao.maps.LatLng(37.54425049,126.9516373)
},
{
content: '<div>마포역 2번출구 뒤</div>',
latlng: new kakao.maps.LatLng(37.53993607,126.9458237)
},
{
content: '<div>마포역 4번출구 뒤</div>',
latlng: new kakao.maps.LatLng(37.53927231,126.9459152)
},
{
content: '<div>용강동 주민센터 앞</div>',
latlng: new kakao.maps.LatLng(37.54234695,126.9430237)
},
{
content: '<div>서강대역 2번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.55295563,126.9343414)
},
{
content: '<div>마포구민체육센터 앞</div>',
latlng: new kakao.maps.LatLng(37.55632401,126.8970947)
},
{
content: '<div>성산2교 사거리</div>',
latlng: new kakao.maps.LatLng(37.56469727,126.9126129)
},
{
content: '<div>마포구청역</div>',
latlng: new kakao.maps.LatLng(37.56090927,126.9054947)
},
{
content: '<div>가좌역1 번출구 뒤</div>',
latlng: new kakao.maps.LatLng(37.56855011,126.9145126)
},
{
content: '<div>서울서부지방법원 앞</div>',
latlng: new kakao.maps.LatLng(37.54990387,126.9551468)
},
{
content: '<div>애오개역 4번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.5530014,126.9566879)
},
{
content: '<div>독립문 어린이 공원</div>',
latlng: new kakao.maps.LatLng(37.57125854,126.9604797)
},
{
content: '<div>이대역 4번 출구</div>',
latlng: new kakao.maps.LatLng(37.55695343,126.9463425)
},
{
content: '<div>북아현동 가구거리</div>',
latlng: new kakao.maps.LatLng(37.55754852,126.9593811)
},
{
content: '<div>무악재역1번 출구</div>',
latlng: new kakao.maps.LatLng(37.58224487,126.9506455)
},
{
content: '<div>봉원고가차도 밑</div>',
latlng: new kakao.maps.LatLng(37.56526947,126.9462433)
},
{
content: '<div>명지전문대학교 정문 앞</div>',
latlng: new kakao.maps.LatLng(37.58369827,126.9249649)
},
{
content: '<div>북가좌1동 주민센터</div>',
latlng: new kakao.maps.LatLng(37.57447815,126.9100494)
},
{
content: '<div>중앙근린공원</div>',
latlng: new kakao.maps.LatLng(37.57513809,126.9139404)
},
{
content: '<div>가재울 초등학교</div>',
latlng: new kakao.maps.LatLng(37.57381821,126.9192352)
},
{
content: '<div>연가초등학교 옆</div>',
latlng: new kakao.maps.LatLng(37.57946014,126.9171295)
},
{
content: '<div>북가좌 삼거리</div>',
latlng: new kakao.maps.LatLng(37.57300186,126.9077988)
},
{
content: '<div>가재울 뉴타운 주유소 옆</div>',
latlng: new kakao.maps.LatLng(37.57311249,126.9224472)
},
{
content: '<div>임광빌딩 앞</div>',
latlng: new kakao.maps.LatLng(37.56472397,126.9672775)
},
{
content: '<div>서대문역 8번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.56477737,126.9661484)
},
{
content: '<div>홍연2교옆</div>',
latlng: new kakao.maps.LatLng(37.57806778,126.9308853)
},
{
content: '<div>명지대학교 도서관</div>',
latlng: new kakao.maps.LatLng(37.58109665,126.9240265)
},
{
content: '<div>북가좌 초등학교</div>',
latlng: new kakao.maps.LatLng(37.57767487,126.9098053)
},
{
content: '<div>증산3교 앞</div>',
latlng: new kakao.maps.LatLng(37.57987595,126.9063492)
},
{
content: '<div>가좌역 4번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.56912231,126.9147949)
},
{
content: '<div>충정로역 7번출구 아래</div>',
latlng: new kakao.maps.LatLng(37.55996704,126.9624634)
},
{
content: '<div>망원초록길 입구</div>',
latlng: new kakao.maps.LatLng(37.55134201,126.9026718)
},
{
content: '<div>망원2빗물펌프장 앞</div>',
latlng: new kakao.maps.LatLng(37.55156708,126.9028473)
},
{
content: '<div>하늘채코오롱아파트 건너편</div>',
latlng: new kakao.maps.LatLng(37.56516647,126.9193955)
},
{
content: '<div>SK망원동주유소 건너편</div>',
latlng: new kakao.maps.LatLng(37.55894852,126.907753)
},
{
content: '<div>마포 신수공원 앞</div>',
latlng: new kakao.maps.LatLng(37.54254532,126.9342957)
},
{
content: '<div>월드컵공원</div>',
latlng: new kakao.maps.LatLng(37.56396484,126.8982086)
},
{
content: '<div>홍은동 정원여중 입구</div>',
latlng: new kakao.maps.LatLng(37.58638763,126.9351273)
},
{
content: '<div>서우빌딩(바른학원)</div>',
latlng: new kakao.maps.LatLng(37.57889175,126.9107361)
},
{
content: '<div>연서어린이공원</div>',
latlng: new kakao.maps.LatLng(37.57222748,126.9230652)
},
{
content: '<div>증산교 앞</div>',
latlng: new kakao.maps.LatLng(37.57731628,126.9029694)
},
{
content: '<div>모래내고가차도</div>',
latlng: new kakao.maps.LatLng(37.56765747,126.9178085)
},
{
content: '<div>연희교차로 인근</div>',
latlng: new kakao.maps.LatLng(37.56612015,126.9258957)
},
{
content: '<div>충정2교</div>',
latlng: new kakao.maps.LatLng(37.5621376,126.9637756)
},
{
content: '<div>서울 월드컵 경기장</div>',
latlng: new kakao.maps.LatLng(37.56684494,126.8964462)
},
{
content: '<div>국회의원회관</div>',
latlng: new kakao.maps.LatLng(37.52841568,126.9139175)
},
{
content: '<div>진미파라곤 앞</div>',
latlng: new kakao.maps.LatLng(37.53123856,126.9213333)
},
{
content: '<div>국민일보 앞</div>',
latlng: new kakao.maps.LatLng(37.52881622,126.92453)
},
{
content: '<div>국회의사당역 3번출구 옆</div>',
latlng: new kakao.maps.LatLng(37.5280571,126.9187012)
},
{
content: '<div>국회의사당역 5번출구 옆</div>',
latlng: new kakao.maps.LatLng(37.52816391,126.9170227)
},
{
content: '<div>산업은행 앞</div>',
latlng: new kakao.maps.LatLng(37.52626419,126.9205093)
},
{
content: '<div>KBS 앞</div>',
latlng: new kakao.maps.LatLng(37.52466583,126.9180222)
},
{
content: '<div>여의나루역 1번출구 앞</div>',
latlng: new kakao.maps.LatLng(37.52715683,126.9319)
},
{
content: '<div>유진투자증권빌딩 앞</div>',
latlng: new kakao.maps.LatLng(37.52461243,126.9278336)
},
{
content: '<div>IFC몰</div>',
latlng: new kakao.maps.LatLng(37.52606583,126.9255371)
},
{
content: '<div>여의도역 4번출구 옆</div>',
latlng: new kakao.maps.LatLng(37.52222824,126.9246368)
},
{
content: '<div>여의도역 1번출구 옆</div>',
latlng: new kakao.maps.LatLng(37.5213623,126.9234619)
},
{
content: '<div>KT앞</div>',
latlng: new kakao.maps.LatLng(37.52190781,126.9189529)
},
{
content: '<div>금융감독원 앞</div>',
latlng: new kakao.maps.LatLng(37.5230217,126.9208374)
}
];

for (var i = 0; i < positions.length; i ++) {
    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({
        map: map, // 마커를 표시할 지도
        position: positions[i].latlng // 마커의 위치
    });

    // 마커에 표시할 인포윈도우를 생성합니다 
    var infowindow = new kakao.maps.InfoWindow({
        content: positions[i].content // 인포윈도우에 표시할 내용
    });

    // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
    // 이벤트 리스너로는 클로저를 만들어 등록합니다 
    // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
    kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
    kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
}

// 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
function makeOverListener(map, marker, infowindow) {
    return function() {
        infowindow.open(map, marker);
    };
}

// 인포윈도우를 닫는 클로저를 만드는 함수입니다 
function makeOutListener(infowindow) {
    return function() {
        infowindow.close();
    };
}

/* 아래와 같이도 할 수 있습니다 */
/*
for (var i = 0; i < positions.length; i ++) {
    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({
        map: map, // 마커를 표시할 지도
        position: positions[i].latlng // 마커의 위치
    });

    // 마커에 표시할 인포윈도우를 생성합니다 
    var infowindow = new kakao.maps.InfoWindow({
        content: positions[i].content // 인포윈도우에 표시할 내용
    });

    // 마커에 이벤트를 등록하는 함수 만들고 즉시 호출하여 클로저를 만듭니다
    // 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
    (function(marker, infowindow) {
        // 마커에 mouseover 이벤트를 등록하고 마우스 오버 시 인포윈도우를 표시합니다 
        kakao.maps.event.addListener(marker, 'mouseover', function() {
            infowindow.open(map, marker);
        });

        // 마커에 mouseout 이벤트를 등록하고 마우스 아웃 시 인포윈도우를 닫습니다
        kakao.maps.event.addListener(marker, 'mouseout', function() {
            infowindow.close();
        });
    })(marker, infowindow);
}
*/
</script>
</body>
</html>